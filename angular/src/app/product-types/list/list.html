<div class="card">
  <div class="card-body">
    <div class="d-flex align-items-center mb-3">
      <button abpPermission="POS.ProductTypes.Create" *ngIf="isAdmin" class="btn btn-primary"
        [routerLink]="['/product-types/edit']">
        <i class="fa fa-plus me-1"></i> Create Product Type
      </button>

      <div class="ms-auto small text-muted">
        Total: <strong>{{ total }}</strong>
      </div>
    </div>
    <div class="table-responsive">
      <table class="table table-striped align-middle">
        <thead>
          <tr>
            <th>Type</th>
            <th>Description</th>
            <th>Creation Time</th>
            <th>Created By</th>
            <th *ngIf="isAdmin"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let t of items; trackBy: trackById">
            <td>{{ t.type }}</td>
            <td>{{ t.typeDesc }}</td>
            <td>{{ t.creationTime | date:'dd MMM yyyy HH:mm' }}</td>
            <td>{{ t.creatorName }}</td>
            <td class="text-end" *ngIf="isAdmin">
              <a [routerLink]="['/product-types/edit', t.id]" abpPermission="POS.ProductTypes.Edit"
                class="btn btn-sm btn-outline-secondary">
                <i class="fa fa-edit"></i>
              </a>
            </td>
          </tr>
          <tr *ngIf="!loading && items.length === 0">
            <td colspan="5" class="text-center text-muted py-4">
              No product types found.
            </td>
          </tr>
          <tr *ngIf="loading">
            <td colspan="5" class="text-center py-4">
              <span class="spinner-border spinner-border-sm me-2"></span>
              Loading…
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- Pagination -->
    <div class="d-flex flex-wrap align-items-center justify-content-between mt-3 gap-2" *ngIf="total > 0">
      <div class="d-flex align-items-center gap-2">
        <span class="small text-muted">Rows per page</span>
        <select class="form-select form-select-sm w-auto" [value]="pageSize"
          (change)="onPageSizeChange($any($event.target).value)">
          <option [value]="10">10</option>
          <option [value]="20">20</option>
          <option [value]="50">50</option>
          <option [value]="100">100</option>
        </select>
      </div>

      <div class="small text-muted">
        {{ visibleFrom }}–{{ visibleTo }} of {{ total }}
      </div>

      <div class="d-flex align-items-center gap-2">
        <button class="btn btn-sm btn-outline-secondary" (click)="changePage(-1)"
          [disabled]="pageIndex === 0 || loading">
          ‹ Prev
        </button>

        <span class="small">Page {{ pageIndex + 1 }}</span>

        <button class="btn btn-sm btn-outline-secondary" (click)="changePage(1)"
          [disabled]="visibleTo >= total || loading">
          Next ›
        </button>
      </div>
    </div>
  </div>
</div>