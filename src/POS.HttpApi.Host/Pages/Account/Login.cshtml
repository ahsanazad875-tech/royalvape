@page
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@addTagHelper *, Volo.Abp.AspNetCore.Mvc.UI
@addTagHelper *, Volo.Abp.AspNetCore.Mvc.UI.Bootstrap
@addTagHelper *, Volo.Abp.AspNetCore.Mvc.UI.Bundling

@using Microsoft.AspNetCore.Mvc.Localization
@using Volo.Abp.Account.Localization
@using Volo.Abp.Account.Settings
@using Volo.Abp.Settings
@using Volo.Abp.AspNetCore.Mvc.UI.Theming

@model Volo.Abp.Account.Web.Pages.Account.LoginModel

@inject IHtmlLocalizer<AccountResource> L
@inject ISettingProvider SettingProvider
@inject ITheme Theme

@{
    // ✅ Use the same empty layout style as your Index page
    Layout = Theme.GetEmptyLayout();
    ViewData["Title"] = "Royal Vape - Login";
}

<style>
    body {
        background: radial-gradient(circle at top left, #172542 0, #141c3f 45%, #020617 100%);
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    .pos-login-page {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: relative;
        padding: 2rem 1rem;
    }

    /* language dropdown top-right */
    .pos-lang-switch {
        position: absolute;
        top: 1.5rem;
        right: 1.5rem;
    }

    .pos-login-card {
        background: #ffffff;
        border-radius: 1.25rem;
        box-shadow: 0 10px 30px rgba(15, 23, 42, 0.12);
        width: 100%;
        max-width: 420px;
        padding: 2.5rem 2.25rem;
    }

    .pos-login-logo {
        text-align: center;
        font-weight: 700;
        font-size: 1.75rem;
        color: #2563eb;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        margin-bottom: 0.75rem;
    }

    .pos-login-title {
        text-align: center;
        font-size: 1.35rem;
        font-weight: 600;
        color: #111827;
        margin-bottom: 0.25rem;
    }

    .pos-login-subtitle {
        text-align: center;
        font-size: 0.9rem;
        color: #6b7280;
        margin-bottom: 1.75rem;
    }

    .pos-login-form .form-label {
        font-size: 0.9rem;
        color: #374151;
        font-weight: 500;
    }

    .pos-login-form .form-control {
        border-radius: 0.6rem;
        padding: 0.6rem 0.9rem;
        border: 1px solid #d1d5db;
    }

    .pos-login-form .form-control:focus {
        box-shadow: 0 0 0 0.12rem rgba(37, 99, 235, 0.25);
        border-color: #2563eb;
    }

    .pos-login-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
        font-size: 0.85rem;
    }

    .pos-login-footer a {
        color: #2563eb;
        text-decoration: none;
    }

    .pos-login-footer a:hover {
        text-decoration: underline;
    }

    .pos-login-btn {
        margin-top: 1.5rem;
        border-radius: 0.65rem;
        padding: 0.7rem;
        font-weight: 600;
        background-color: #2563eb;
        border: none;
    }

    .pos-login-btn:hover {
        background-color: #1d4ed8;
    }

    @@media (max-width: 576px) {
        .pos-login-card {
            padding: 2rem 1.5rem;
        }

        .pos-lang-switch {
            top: 1rem;
            right: 1rem;
        }
    }
</style>

<div class="pos-login-page">
    <!-- language switcher in a standard, clean spot -->
    <div class="pos-lang-switch">
        <abp-language-switch></abp-language-switch>
    </div>

    <div class="pos-login-card">
        <div class="pos-login-logo">Royal Vape</div>
        <div class="pos-login-title">@L["Login"]</div>
        <div class="pos-login-subtitle">@L["Welcome"]</div>

        @* @if (await SettingProvider.IsTrueAsync(AccountSettingNames.IsSelfRegistrationEnabled))
        {
            <div class="mb-3 text-center" style="font-size:.88rem;">
                <span>@L["AreYouANewUser"]</span>
                <a href="@Url.Page("./Register", new { returnUrl = Model.ReturnUrl, returnUrlHash = Model.ReturnUrlHash })" class="ms-1">
                    @L["Register"]
                </a>
            </div>
        } *@

        @if (Model.EnableLocalLogin)
        {
            <form method="post" class="pos-login-form">
                <input asp-for="ReturnUrl" type="hidden" />
                <input asp-for="ReturnUrlHash" type="hidden" />

                <div asp-validation-summary="All" class="text-danger mb-2"></div>

                <div class="mb-3">
                    <label asp-for="LoginInput.UserNameOrEmailAddress" class="form-label"></label>
                    <input asp-for="LoginInput.UserNameOrEmailAddress" class="form-control" autocomplete="username" />
                    <span asp-validation-for="LoginInput.UserNameOrEmailAddress" class="text-danger"></span>
                </div>

                <div class="mb-2">
                    <label asp-for="LoginInput.Password" class="form-label"></label>
                    <input asp-for="LoginInput.Password" class="form-control" autocomplete="current-password" />
                    <span asp-validation-for="LoginInput.Password" class="text-danger"></span>
                </div>

                <div class="pos-login-footer">
                    <div>
                        <input asp-for="LoginInput.RememberMe" class="form-check-input me-1" />
                        <label asp-for="LoginInput.RememberMe" class="form-check-label"></label>
                    </div>
                    <div>
                        <a href="@Url.Page("./ForgotPassword", new { returnUrl = Model.ReturnUrl, returnUrlHash = Model.ReturnUrlHash })">
                            @L["ForgotPassword"]
                        </a>
                    </div>
                </div>

                <button type="submit"
                        name="Action"
                        value="Login"
                        class="btn btn-primary w-100 pos-login-btn">
                    @L["Login"]
                </button>
            </form>
        }
    </div>
</div>
